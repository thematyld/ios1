#!/bin/bash
POSIXLY_CORRECT=yes
ed=""
file=""
date=""


#---------------Error----------------#
error () {
   echo "$1" >&2
   exit	-1
}

#-------------------------------------WEDI_RC---Variable----------------------#

# If non initialize variable WEDI_RC 
if [[ -z "${WEDI_RC}" ]]; then 
   error "WEDI_RC hasn't path..."
elif [ ! -e "${WEDI_RC}" ]; then	# If not exist path $WEDI_RC
   echo "Wedi has set path, but invalid...Creating path.." >&2
   x="`dirname $WEDI_RC`"
   if [ ! -d $x ]; then   #If file without last word doesn't exist and it's folder
      mkdir $x
      touch $x/${WEDI_RC##*/}
   else
      touch $x/${WEDI_RC##*/} 
   fi
fi

#---------------------EDITOR---CONFIGURATION----------------#

if [ ! -z "${EDITOR}" ]; then
  ed=$EDITOR
elif [ ! -z "$VISUAL" ]; then 
  ed=$VISUAL
else
  ed=vi
fi

#------------------Function--Open-file-------
open_file () { 
if [ -f $file ]; then
   $ed $file 
else
   error "File didn't exist !!"
fi
}

#-------------------
par_EQ1 () {
  echo "ano"
  if [ -f ${arg1} ]; then
     file=${arg1}
     open_file
 #  [ -d ${1} ] && 			#EDIT TOD
  fi
}

par_EQ2 () {
   case ${arg1} in
    -m) file=${arg2}
	;;
    -l) file=${arg2}
	;;
     *) error "Invalid parameters. Use --help" 
	 ;;
   esac
}

par_EQ3 () {
   case ${arg1} in
    -a) file=$arg3
	;;
    -b) file=$arg3
	;;
     *) error "Invalid parameters. Use --help" 
 	;;
   esac
   date=$arg2
}

#---------------CASE----------
case $# in
    0) error "0 parameters !!"
	;;
    1) arg1=${1}
       par_EQ1
	;;
    2) arg1=${1}
       arg2=${2}
       par_EQ2
	;;
    3) arg1=${1}
       arg2=${2}
       arg3=${3}
       par_EQ3
	;;
    *) error "Too many parameters !!"
	;;
esac
#--------------------------------------------
[ -d "$file" ] && echo "I'm folder"
[ -f "$file" ] && echo "I'm file"

